<!DOCTYPE html>
<html lang="en-US">	

<head>
<meta charset="utf-8"/>
<title>B4P Reference</title>
<link rel="stylesheet" href="styles.css">
</head>


<div class="wrapper">

<div class="logo">
<a href="index.html">
<img src="Images/B4P_Logo.png" alt="Beyond4P">
</a>
</div>

<div class="header">
<h3>smart (if) numeral</h3>
<a accesskey="p" href="REF_Function_clean_numeral.html"><span>Prev</span></a> <a accesskey="n" href="REF_Function_date.html"><span>Next</span></a> 
</div>

<section>
	<div class="nav">
<div class="booktitle_field">Reference Manual</div>
<ul>
<li class="navi"><a href="GUI_Features_Table_of_Contents.html"><div class="navi"> &#8594; User Guide </div></a></li>
<li class="navi"><a href="REF_Features_Table_of_Contents.html"><div class="navi"> Table of Contents </div></a></li>
<li class="navi"><a href="REF_Features_starting.html"><div class="navi">1 Starting B4P </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_interactive.html"><div class="navi">1.1 Interactive Mode </div></a></li>
<li class="navi"><a href="REF_Features_licensing.html"><div class="navi">1.2 Licensing </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_introduction.html"><div class="navi">2 Introduction </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_UNICODE_character_set.html"><div class="navi">2.1 UNICODE Character Set </div></a></li>
<li class="navi"><a href="REF_Features_data_types.html"><div class="navi">2.2 Basic Data Types </div></a></li>
<li class="navi"><a href="REF_Features_variables.html"><div class="navi">2.3 Variables </div></a></li>
<li class="navi"><a href="REF_Features_comments.html"><div class="navi">2.4 Comments </div></a></li>
<li class="navi"><a href="REF_Features_reserved_keywords.html"><div class="navi">2.5 Reserved keywords </div></a></li>
<li class="navi"><a href="REF_Features_path_names.html"><div class="navi">2.6 Path and File Names </div></a></li>
<li class="navi"><a href="REF_Features_Locales.html"><div class="navi">2.7 Locales </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_tables.html"><div class="navi">3 Tables </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_accessing_tables.html"><div class="navi">3.1 Accessing Tables </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_Functions_and_Procedures.html"><div class="navi">4 Functions and Procedures </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_Function_Parameters.html"><div class="navi">4.1 Function Parameters </div></a></li>
<li class="navi"><a href="REF_Features_Function_parameter_directions.html"><div class="navi">4.2 Function Parameter Directions </div></a></li>
<li class="navi"><a href="REF_Features_Function_parameter_types.html"><div class="navi">4.3 Function Parameter Types </div></a></li>
<li class="navi"><a href="REF_Features_Indirect_parameter_passing.html"><div class="navi">4.4 Indirect Parameter Passing </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_Function_Library.html"><div class="navi">5 Function Library </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_Control_Flow_Functions.html"><div class="navi">5.1 Control Flow Functions </div></a></li>
<li class="navi"><a href="REF_Features_input_output_functions.html"><div class="navi">5.2 Input / Output Functions </div></a></li>
<li class="navi"><a href="REF_Features_Type_Conversion_Functions.html"><div class="navi">5.3 Type Conversion and Formatting Functions </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Function_literal.html"><div class="navi">5.3.1 literal, quoted literal, softquoted literal </div></a></li>
<li class="navi"><a href="REF_Function_numeral.html"><div class="navi">5.3.2 numeral </div></a></li>
<li class="navi"><a href="REF_Function_clean_numeral.html"><div class="navi">5.3.3 clean (if) numeral </div></a></li>
<li class="navi"><a href="REF_Function_smart_numeral.html"><div class="navi navi-selected">5.3.4 smart (if) numeral </div></a></li>
<li class="navi"><a href="REF_Function_date.html"><div class="navi">5.3.5 date, pure date, date time </div></a></li>
<li class="navi"><a href="REF_Function_time.html"><div class="navi">5.3.6 time, pure time </div></a></li>
<li class="navi"><a href="REF_Features_Detects_dates_correctly_in_literals.html"><div class="navi">5.3.7 Date and Time Detection Rules </div></a></li>
<li class="navi"><a href="REF_Function_boolean.html"><div class="navi">5.3.8 boolean </div></a></li>
<li class="navi"><a href="REF_Function_parameter_set.html"><div class="navi">5.3.9 parameter set </div></a></li>
<li class="navi"><a href="REF_Function_join.html"><div class="navi">5.3.10 join ... </div></a></li>
<li class="navi"><a href="REF_Function_type.html"><div class="navi">5.3.11 type, type detailed </div></a></li>
<li class="navi"><a href="REF_Function_hash_signature.html"><div class="navi">5.3.12 hash signature </div></a></li>
<li class="navi"><a href="REF_Function_excel_column_number.html"><div class="navi">5.3.13 excel column number </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_Mathematics_and_Statistics.html"><div class="navi">+ 5.4 Mathematics and Statistics </div></a></li>
<li class="navi"><a href="REF_Features_string_functions.html"><div class="navi">+ 5.5 String Functions </div></a></li>
<li class="navi"><a href="REF_Features_date_and_time_functions.html"><div class="navi">+ 5.6 Date and Time Functions </div></a></li>
<li class="navi"><a href="REF_Features_parameter_set_functions.html"><div class="navi">+ 5.7 Parameter Set Functions </div></a></li>
<li class="navi"><a href="REF_Features_table_functions.html"><div class="navi">+ 5.8 Table Functions </div></a></li>
<li class="navi"><a href="REF_Features_variables_functions.html"><div class="navi">+ 5.9 Variables Functions </div></a></li>
<li class="navi"><a href="REF_Features_directory_and_file_system_functions.html"><div class="navi">+ 5.10 Directory and File System Functions </div></a></li>
<li class="navi"><a href="REF_Features_system_functions.html"><div class="navi">+ 5.11 System Functions </div></a></li>
<li class="navi"><a href="REF_Features_help_and_support_functions.html"><div class="navi">+ 5.12 Help and Support Functions </div></a></li>
<li class="navi"><a href="REF_Features_Cross-functional_info.html"><div class="navi">+ 5.13 Cross-Functional Info </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_verbose.html"><div class="navi"> Verbose Levels </div></a></li>
</ul>
	</div>

	<div class="article">
<h4> Function Names</h4>
<div class="white_background_color" ><code>smart numeral, smart if numeral</code></div>
<h4> Description</h4>
<p>
These two functions are an upgrade variant of <a class="bold_text" href="REF_Function_clean_numeral.html">clean numeral</a>() and <a class="bold_text" href="REF_Function_clean_numeral.html">clean if numeral</a>().

The functions smart numeral and smart if numeral provide automatic up- and downscaling feature if (e.g. metric) scaling units are specified.
As long no user specific units and scaling factors are specified in the 3rd and 4th parameters, the following units will be recognized and rescale
the numbers.   These stanard units are not case sensitive.<br><br>

<b>General Scaling Factors:</b>
</p><table class="bold_column_1" style = "width:1000px"><col style = "width:150px"><col style = "width:150px"><col style = "width:700px">
<tr><th>Units                       </th><th> Scaling Factor        </th><th> Explanation</th></tr>
<tr><td>&cent;, pct, %              </td><td> 0.01                  </td><td> Cent, percent</td></tr>
<tr><td>&permil; (&amp;permil;)     </td><td> 0.001                 </td><td> Per mille, part per thousand, see <sub>1</sub></td></tr>
<tr><td>&pertenk; (&amp;ertenk;), bp</td><td> 0.000 1               </td><td> Part per ten thousand, base point (in finance), see <sub>1</sub></td></tr>
<tr><td>pcm                         </td><td> 0.000 01              </td><td> Percent mille, part per hundred thousand</td></tr>
<tr><td>ppm                         </td><td> 0.000 001             </td><td> Part per million</td></tr>
<tr><td>ppb                         </td><td> 0.000 000 001         </td><td> Part per billion</td></tr>
<tr><td>k, t, tsd                   </td><td> 1,000                 </td><td> Kilo, thousand</td></tr>
<tr><td>m, mn, mln, mio             </td><td> 1,000,000             </td><td> Mega, million</td></tr>
<tr><td>g, b, bn, bln               </td><td> 1,000,000,000         </td><td> Giga, billion (<u>Note: B4P uses the</u> U.S. English interpretation of <i>billion</i>)</td></tr>
<tr><td>mrd, md, mia                </td><td> 1,000,000,000         </td><td> Milliard (common in Great Britain and other languages)</td></tr>
</table><p>

<b>Indian Scaling Factors:</b>
</p><table class="bold_column_1" style = "width:1000px"><col style = "width:150px"><col style = "width:150px"><col style = "width:700px">
<tr><th>Units                       </th><th> Scaling Factor        </th><th> Explanation</th></tr>
<tr><td>lakh, lk, lac               </td><td> 100,000               </td><td> Indian hundred thousand</td></tr>
<tr><td>crore, cr                   </td><td> 10,000,000            </td><td> Indian ten milllion</td></tr>
<tr><td>arab                        </td><td> 1,000,000,000         </td><td> Indian 1 billion (British English: Indian 1 milliard)</td></tr>
</table><p>

<b>Prefix letters before 3-letter currency codes</b>, not case sensitive;
</p><table class="bold_column_1" style = "width:1000px"><col style = "width:150px"><col style = "width:150px"><col style = "width:700px">
<tr><th>Txxx, Kxxx                  </th><th> 1,000                 </th><th> TGBP, KUSD, KEUR, etc.</th></tr>
<tr><td>Mxxx                        </td><td> 1,000,000             </td><td> MUSD, MCHF</td></tr>
<tr><td>Bxxx                        </td><td> 1,000,000             </td><td> BUSD, BRUB</td></tr>
</table><p>

The different prefixes can be combined, e.g. <b>smart numeral ( 1 kEUR % )</b> returns 10.

<br><br>
The function <b>smart if numeral</b> behaves similarly like <b>clean if numeral</b>: Contents without numbers inside are passed through as literals.

<br><br>
Application hint: After loading a table from a different source, apply this function on all applicable number columns in order to clean
them up and do necessary scalings.

</p>
<h4> Call as: <span class="black_text">function</span></h4>
<h4> Restrictions</h4>
<p>Indirect parameter passing is disabled</p>
<h4> Parameter count</h4>
<p>1, 2, 4</p>
<h4> Parameters</h4>
<table class="simple"><col style = "width:80px"><col style = "width:120px"><col style = "width:800px"><tr><th>No.</th><th>Type</th><th>Description</th></tr>
<tr><td>1<br/>input</td>
<td>numeral or literal</td>
<td><b>Value</b><br/><p>If literal and containing digits: Conversion to numeral.<br>
If literal and containing no digits or literal is blank: Conversion to 0 (<b>clean numeral</b>) or literal returned (function <b>clean if numeral</b>)
If numeral: Will be passed through.</p>
</td></tr>
<tr><td>2<br/>input</td>
<td>literal</td>
<td><b>Decimal symbol</b><br/><p>Use single character symbol, e.g. '.' or ','. <br>
Specify 'local' to use currently applicable locale settings.  Examples: It chooses '.' for countries like USA, United Kingdom and Switzerland, and ',' for Germany and Austria.</p>
<span class="black_text"><b> Default value: </b></span>. (point)
</td></tr>
<tr><td>Opt. 3<br/>input</td>
<td>parameter set containing literals</td>
<td><b>Custom units</b><br/><p>Specify at least 1 unit name.  The units provided will be used instead (and not in addition) of the standard units.
<u>Attention:</u>Comparison of these units is <u>case-sensitive</u>. This allows to distinguish lower-case letters like "m" for milli and upper-case leeters like "M" for mega.
<br>Attention: 4th parameter must also be specified.</p>
<span class="black_text"><b> Default value: </b></span>Standard units apply (not case-sensitive)
</td></tr>
<tr><td>Opt. 4<br/>input</td>
<td>parameter set containing numerals</td>
<td><b>Custom scaling factors</b><br/><p>For each custom unit defined in the previous function parameter, the correponding scaling factor needs to be added.
</p>
</td></tr>
</table>
<h4> Return value</h4>
<table class="simple"><col style = "width:120px"><col style = "width:880px"><tr><th>Type</th><th>Description</th></tr>
<tr>
<td>numeral<br/>literal</td>
<td><b>number</b><br/><p>Contains resulting number.  Literals may be returned by the function <b>smart if numeral</b> if the input value contains no digits.</p></td></tr>
</table>
<h4> Examples</h4>
<div class="code_background_color" ><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo(&nbsp;smart&nbsp;numeral(&nbsp;"5.0&nbsp;MUSD"&nbsp;));&nbsp;//&nbsp;5,000,000<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo(&nbsp;smart&nbsp;numeral(&nbsp;"EUR&nbsp;1.2mn"&nbsp;));&nbsp;//&nbsp;1,200,000<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo(&nbsp;smart&nbsp;numeral(&nbsp;"INR&nbsp;0.5&nbsp;lk"&nbsp;));&nbsp;//&nbsp;50,000<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo(&nbsp;smart&nbsp;numeral(&nbsp;'50%'&nbsp;));&nbsp;//&nbsp;0.5<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo(&nbsp;smart&nbsp;numeral(&nbsp;'Alc.&nbsp;0.5&nbsp;&amp;permil;'&nbsp;));&nbsp;//&nbsp;0.0005<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo(&nbsp;smart&nbsp;numeral(&nbsp;"1.23cr"&nbsp;));&nbsp;&nbsp;//&nbsp;12,300,000<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo(&nbsp;smart&nbsp;numeral(&nbsp;1.23m,&nbsp;".",&nbsp;{&nbsp;m,&nbsp;M&nbsp;},&nbsp;{0.000001,&nbsp;1000000}&nbsp;));</code></div>
<h4> Output</h4>
<div class="output_background_color" ><code>5000000<br/>
1200000<br/>
50000<br/>
0.5<br/>
0.00005<br/>
12300000<br/>
0.00000123<br/>
</code></div><u>Try it yourself:</u> Open <b>REF_Function_smart_numeral.b4p</b> in <a class="bold_text" href="B4P_Examples.zip">B4P_Examples.zip</a>. Decompress before use.
<h4> See also</h4>
<p><a class = "bold_text" href="REF_Function_numeral.html">numeral conversion function</a><br/>
<a class = "bold_text" href="REF_Function_clean_numeral.html">clean numeral</a><br/>
<a class = "bold_text" href="REF_Function_clean_numeral.html">clean if numeral</a></p>
	</div>
</section>

<div class="footer">
Copyright (C) 2007 - 2020 Georg zur Bonsen
</div>

</div>

</html>	


