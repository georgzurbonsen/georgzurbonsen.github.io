<!DOCTYPE html>
<html lang="en-US">	

<head>
<meta charset="utf-8"/>
<title>Beyond 4P Reference</title>
<link rel="stylesheet" href="styles.css">
</head>


<div class="logo">
<img src="Images/Beyond4P_Logo.jpg" alt="Beyond4P">
</div>

<div class="header">
<h3>smart (if) numeral</h3>
prev  next
</div>

<section>
	<div class="nav">
<ul>
<li class="navi"><a href="Features_Table_of_Contents.html"><span>1 Table of Contents </span></a></li>
<li class="navi"><a href="Features_starting.html"><span>+ 2 Starting Beyond4P </span></a></li>
<li class="navi"><a href="Features_introduction.html"><span>+ 3 Introduction </span></a></li>
<li class="navi"><a href="Features_Function_Library.html"><span>4 Function Library </span></a></li>
<li class="navi"><ul>
<li class="navi"><a href="Features_Control_Flow_Functions.html"><span>+ 4.1 Control Flow Functions </span></a></li>
<li class="navi"><a href="Features_Type_Conversion_Functions.html"><span>4.2 Type Conversion and Formatting Functions </span></a></li>
<li class="navi"><ul>
<li class="navi"><a href="Function_literal.html"><span>+ 4.2.1 literal, quoted literal, softquoted literal </span></a></li>
<li class="navi"><a href="Function_numeral.html"><span>4.2.2 numeral </span></a></li>
<li class="navi"><a href="Function_clean_numeral.html"><span>4.2.3 clean (if) numeral </span></a></li>
<li class="navi"><a href="Function_smart_numeral.html"><span>4.2.4 smart (if) numeral </span></a></li>
<li class="navi"><a href="Function_date.html"><span>4.2.5 date, pure date, date time </span></a></li>
<li class="navi"><a href="Function_time.html"><span>4.2.6 time, pure time </span></a></li>
<li class="navi"><a href="Features_Detects_dates_correctly_in_literals.html"><span>4.2.7 Date and Time Detection Rules </span></a></li>
<li class="navi"><a href="Function_boolean.html"><span>4.2.8 boolean </span></a></li>
<li class="navi"><a href="Function_parameter_set.html"><span>4.2.9 parameter set </span></a></li>
<li class="navi"><a href="Function_join.html"><span>4.2.10 join ... </span></a></li>
<li class="navi"><a href="Function_type.html"><span>4.2.11 type, type detailed </span></a></li>
</ul></li>
<li class="navi"><a href="Features_Mathematics_and_Statistics.html"><span>+ 4.3 Mathematics and Statistics </span></a></li>
<li class="navi"><a href="Features_string_functions.html"><span>+ 4.4 String Functions </span></a></li>
<li class="navi"><a href="Features_date_and_time_functions.html"><span>+ 4.5 Date and Time Functions </span></a></li>
<li class="navi"><a href="Features_parameter_set_functions.html"><span>+ 4.6 Parameter Set Functions </span></a></li>
<li class="navi"><a href="Features_directory_and_file_system.html"><span>+ 4.7 Directory and File System Functions </span></a></li>
</ul></li>
<li class="navi"><a href="Function_print.html"><span> Basic Text Output Functions </span></a></li>
<li class="navi"><a href="Function_cls.html"><span> Clear screen </span></a></li>
<li class="navi"><a href="Function_identify.html"><span> Identify variable forms (if structure, array, or simple) </span></a></li>
<li class="navi"><a href="Function_cursor.html"><span> Set cursor positions </span></a></li>
<li class="navi"><a href="Function_text_color.html"><span> Set console text and background colors </span></a></li>
</ul>
	</div>

	<div class="article">
<h4> Function Names</h4>
<code>smart numeral, smart if numeral</code>
<h4> Description</h4>
<p>
These two functions are an upgrade variant of <a class="bold_text" href="Function_clean_numeral.html">clean numeral</a>() and <a class="bold_text" href="Function_clean_numeral.html">clean if numeral</a>().

The functions smart numeral and smart if numeral provide automatic up- and downscaling feature if (e.g. metric) scaling units are specified.
As long no user specific units and scaling factors are specified in the 3rd and 4th parameters, the following units will be recognized and rescale
the numbers.   These stanard units are not case sensitive.<br><br>

<b>General Scaling Factors:</b>
</p><table class="bold_column_1" style = "width:1000px"><col style = "width:150px"><col style = "width:150px"><col style = "width:700px">
<tr><th>Units                       </th><th> Scaling Factor        </th><th> Explanation</th></tr>
<tr><td>&cent;, pct, %              </td><td> 0.01                  </td><td> Cent, percent</td></tr>
<tr><td>&permil; (&amp;permil;)     </td><td> 0.001                 </td><td> Per mille, part per thousand, see <sub>1</sub></td></tr>
<tr><td>&pertenk; (&amp;ertenk;), bp</td><td> 0.000 1               </td><td> Part per ten thousand, base point (in finance), see <sub>1</sub></td></tr>
<tr><td>pcm                         </td><td> 0.000 01              </td><td> Percent mille, part per hundred thousand</td></tr>
<tr><td>ppm                         </td><td> 0.000 001             </td><td> Part per million</td></tr>
<tr><td>ppb                         </td><td> 0.000 000 001         </td><td> Part per billion</td></tr>
<tr><td>k, t, tsd                   </td><td> 1,000                 </td><td> Kilo, thousand</td></tr>
<tr><td>m, mn, mln, mio             </td><td> 1,000,000             </td><td> Mega, million</td></tr>
<tr><td>g, b, bn, bln               </td><td> 1,000,000,000         </td><td> Giga, billion (<u>Note: Beyond4P uses the</u> U.S. English interpretation of <i>billion</i>)</td></tr>
<tr><td>mrd, md, mia                </td><td> 1,000,000,000         </td><td> Milliard (common in Great Britain and other languages)</td></tr>
</table><p>

<b>Indian Scaling Factors:</b>
</p><table class="bold_column_1" style = "width:1000px"><col style = "width:150px"><col style = "width:150px"><col style = "width:700px">
<tr><th>Units                       </th><th> Scaling Factor        </th><th> Explanation</th></tr>
<tr><td>lakh, lk, lac               </td><td> 100,000               </td><td> Indian hundred thousand</td></tr>
<tr><td>crore, cr                   </td><td> 10,000,000            </td><td> Indian ten milllion</td></tr>
<tr><td>arab                        </td><td> 1,000,000,000         </td><td> Indian 1 billion (British English: Indian 1 milliard)</td></tr>
</table><p>

<b>Prefix letters before 3-letter currency codes</b>, not case sensitive;
</p><table class="bold_column_1" style = "width:1000px"><col style = "width:150px"><col style = "width:150px"><col style = "width:700px">
<tr><th>Txxx, Kxxx                  </th><th> 1,000                 </th><th> TGBP, KUSD, KEUR, etc.</th></tr>
<tr><td>Mxxx                        </td><td> 1,000,000             </td><td> MUSD, MCHF</td></tr>
<tr><td>Bxxx                        </td><td> 1,000,000             </td><td> BUSD, BRUB</td></tr>
</table><p>

The different prefixes can be combined, e.g. <b>smart numeral ( 1 kEUR % )</b> returns 10.

<br><br>
The function <b>smart if numeral</b> behaves similarly like <b>clean if numeral</b>: Contents without numbers inside are passed through as literals.

<br><br>
Application hint: After loading a table from a different source, apply this function on all applicable number columns in order to clean
them up and do necessary scalings.

</p>
<h4> Call as: <span class="black_text">function</span></h4>
<h4> Restrictions</h4>
<p>Indirect parameter passing is disabled</p>
<h4> Parameter count: <span class="black_text">1, 2, 4</span></h4>
<h4> Parameters</h4>
<table class="simple"><col style = "width:80px"><col style = "width:120px"><col style = "width:800px"><tr><th>No.</th><th>Type</th><th>Description</th></tr>
<tr><td>1<br/>input</td>
<td>numeral or literal</td>
<td><b>Value</b><br/><p>If literal and containing digits: Conversion to numeral.<br>
If literal and containing no digits or literal is blank: Conversion to 0 (<b>clean numeral</b>) or literal returned (function <b>clean if numeral</b>)
If numeral: Will be passed through.</p>
</td></tr>
<tr><td>2<br/>input</td>
<td>literal</td>
<td><b>Decimal symbol</b><br/><p>Use single character symbol, e.g. '.' or ','. <br>
Specify 'local' to use currently applicable locale settings.  Examples: It chooses '.' for countries like USA, United Kingdom and Switzerland, and ',' for Germany and Austria.</p>
<span class="black_text"><b> Default value: </b></span>. (point)
</td></tr>
<tr><td>Opt. 3<br/>input</td>
<td>parameter set containing literals</td>
<td><b>Custom units</b><br/><p>Specify at least 1 unit name.  The units provided will be used instead (and not in addition) of the standard units.
<u>Attention:</u>Comparison of these units is <u>case-sensitive</u>. This allows to distinguish lower-case letters like "m" for milli and upper-case leeters like "M" for mega.
<br>Attention: 4th parameter must also be specified.</p>
<span class="black_text"><b> Default value: </b></span>Standard units apply (not case-sensitive)
</td></tr>
<tr><td>Opt. 4<br/>input</td>
<td>parameter set containing numerals</td>
<td><b>Custom scaling factors</b><br/><p>For each custom unit defined in the previous function parameter, the correponding scaling factor needs to be added.
</p>
</td></tr>
</table>
<h4> Return value</h4>
<table class="simple"><col style = "width:120px"><col style = "width:880px"><tr><th>Type</th><th>Description</th></tr>
<tr>
<td>numeral<br/>literal</td>
<td><b>number</b><br/><p>Contains resulting number.  Literals may be returned by the function <b>smart if numeral</b> if the input value contains no digits.</p></td></tr>
</table>
<h4> Examples</h4>
<code> &nbsp; &nbsp; &nbsp;echo( smart numeral( "5.0 MUSD" )); // 5,000,000<br/>
 &nbsp; &nbsp; &nbsp;echo( smart numeral( "EUR 1.2mn" )); // 1,200,000<br/>
 &nbsp; &nbsp; &nbsp;echo( smart numeral( "INR 0.5 lk" )); // 50,000<br/>
 &nbsp; &nbsp; &nbsp;echo( smart numeral( '50%' )); // 0.5<br/>
 &nbsp; &nbsp; &nbsp;echo( smart numeral( 'Alc. 0.5 &amp;permil;' )); // 0.0005<br/>
 &nbsp; &nbsp; &nbsp;echo( smart numeral( "1.23cr" )); &nbsp;// 12,300,000<br/>
 &nbsp; &nbsp; &nbsp;echo( smart numeral( 1.23m, ".", { m, M }, {0.000001, 1000000} ));</code>
<h4> Output</h4>
<code>5000000<br/>
1200000<br/>
50000<br/>
0.5<br/>
0.00005<br/>
12300000<br/>
0.00000123<br/>
</code>
<h4> See also</h4>
<p><a href="Function_numeral.html">numeral conversion function</a><br/>
<a href="Function_clean_numeral.html">clean numeral</a><br/>
<a href="Function_clean_numeral.html">clean if numeral</a></p>
	</div>
</section>

<div class="footer">
Copyright (C) 2007 - 2020 Georg zur Bonsen
</div>


</html>	


