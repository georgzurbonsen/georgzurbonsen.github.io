<!DOCTYPE html>
<html lang="en-US">	

<head>
<meta charset="utf-8"/>
<title>B4P Reference</title>
<link rel="stylesheet" href="styles.css">
</head>


<div class="wrapper">

<div class="logo">
<a href="index.html">
<img src="Images/B4P_Logo.png" alt="Beyond4P">
</a>
</div>

<div class="header">
<h3>Loading and Saving Files</h3>
<a accesskey="p" href="REF_Features_console.html"><span>Prev</span></a> <a accesskey="n" href="REF_Features_CSV.html"><span>Next</span></a> 
</div>

<section>
	<div class="nav">
<div class="booktitle_field">Reference Manual</div>
<ul>
<li class="navi"><a href="GUI_Features_Table_of_Contents.html"><div class="navi"> &#8594; User Guide </div></a></li>
<li class="navi"><a href="REF_Features_Table_of_Contents.html"><div class="navi"> Table of Contents </div></a></li>
<li class="navi"><a href="REF_Features_starting.html"><div class="navi">1 Starting B4P </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_interactive.html"><div class="navi">1.1 Interactive Mode </div></a></li>
<li class="navi"><a href="REF_Features_licensing.html"><div class="navi">1.2 Licensing </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_introduction.html"><div class="navi">2 Introduction </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_UNICODE_character_set.html"><div class="navi">2.1 UNICODE Character Set </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_case_sensitivity.html"><div class="navi">2.1.1 Case Sensitivity </div></a></li>
<li class="navi"><a href="REF_Features_entities.html"><div class="navi">2.1.2 HTML Entities </div></a></li>
<li class="navi"><a href="REF_Features_console.html"><div class="navi">2.1.3 Console Input / Output </div></a></li>
<li class="navi"><a href="REF_Features_loading_files.html"><div class="navi navi-selected">2.1.4 Loading and Saving Files </div></a></li>
<li class="navi"><a href="REF_Features_CSV.html"><div class="navi">2.1.5 CSV File Format </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_data_types.html"><div class="navi">+ 2.2 Basic Data Types </div></a></li>
<li class="navi"><a href="REF_Features_reserved_keywords.html"><div class="navi">2.3 Reserved keywords </div></a></li>
<li class="navi"><a href="REF_Features_path_names.html"><div class="navi">2.4 Path and File Names </div></a></li>
<li class="navi"><a href="REF_Features_Locales.html"><div class="navi">2.5 Locales </div></a></li>
<li class="navi"><a href="REF_Features_comments.html"><div class="navi">2.6 Comments </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_variables.html"><div class="navi">3 Variables </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_variable_scopes.html"><div class="navi">+ 3.1 Variable Scopes </div></a></li>
<li class="navi"><a href="REF_Features_Variable_attributes.html"><div class="navi">3.2 Variable Attributes </div></a></li>
<li class="navi"><a href="REF_Features_Variable_forms.html"><div class="navi">+ 3.3 Variable Forms and Trees </div></a></li>
<li class="navi"><a href="REF_Features_references_to_variables.html"><div class="navi">+ 3.4 References to Variables </div></a></li>
<li class="navi"><a href="REF_Features_protecting_variables.html"><div class="navi">3.5 Protecting Variables </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_tables.html"><div class="navi">4 Tables </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_accessing_tables.html"><div class="navi">+ 4.1 Accessing Tables </div></a></li>
<li class="navi"><a href="REF_Features_memory_effect.html"><div class="navi">4.2 Header Names - Memory Effect </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_formulas_and_operators.html"><div class="navi">5 Formulas and Operators </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_unary_operators.html"><div class="navi">5.1 Unary Operators </div></a></li>
<li class="navi"><a href="REF_Features_binary_operators.html"><div class="navi">+ 5.2 Binary Operators </div></a></li>
<li class="navi"><a href="REF_Features_deep_operators.html"><div class="navi">+ 5.3 Deep Operators </div></a></li>
<li class="navi"><a href="REF_Features_Assignment_operators.html"><div class="navi">5.4 Assignment operators </div></a></li>
<li class="navi"><a href="REF_Features_deep_assignment_operators.html"><div class="navi">5.5 Deep Assignment Operators </div></a></li>
<li class="navi"><a href="REF_Features_ad-hoc_operators.html"><div class="navi">+ 5.6 Ad-hoc Operators </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_Transactions.html"><div class="navi">6 Transactions </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_Without_Transaction_Assignment_Operators.html"><div class="navi">+ 6.1 Without Transaction Assignment Operators </div></a></li>
<li class="navi"><a href="REF_Features_Transactions_with_AND_assignment_operator.html"><div class="navi">+ 6.2 &amp; Transaction Assignment Operators </div></a></li>
<li class="navi"><a href="REF_Features_Transactions_with_OR_assignment_operator.html"><div class="navi">+ 6.3 &vert; Transaction Assignment Operators </div></a></li>
<li class="navi"><a href="REF_Features_Transactions_with_ADD_assignment_operator.html"><div class="navi">+ 6.4 &#43; Transaction Assignment Operators </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_Functions_and_Procedures.html"><div class="navi">7 Functions and Procedures </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_Function_Parameters.html"><div class="navi">7.1 Function Parameters </div></a></li>
<li class="navi"><a href="REF_Features_Function_parameter_directions.html"><div class="navi">7.2 Function Parameter Directions </div></a></li>
<li class="navi"><a href="REF_Features_Function_parameter_types.html"><div class="navi">+ 7.3 Function Parameter Types </div></a></li>
<li class="navi"><a href="REF_Features_Indirect_parameter_passing.html"><div class="navi">7.4 Indirect Parameter Passing </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_Function_Library.html"><div class="navi">8 Function Library </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="REF_Features_Control_Flow_Functions.html"><div class="navi">+ 8.1 Control Flow Functions </div></a></li>
<li class="navi"><a href="REF_Features_input_output_functions.html"><div class="navi">+ 8.2 Input / Output Functions </div></a></li>
<li class="navi"><a href="REF_Features_Type_Conversion_Functions.html"><div class="navi">+ 8.3 Type Conversion and Formatting Functions </div></a></li>
<li class="navi"><a href="REF_Features_Mathematics_and_Statistics.html"><div class="navi">+ 8.4 Mathematics and Statistics </div></a></li>
<li class="navi"><a href="REF_Features_string_functions.html"><div class="navi">+ 8.5 String Functions </div></a></li>
<li class="navi"><a href="REF_Features_date_and_time_functions.html"><div class="navi">+ 8.6 Date and Time Functions </div></a></li>
<li class="navi"><a href="REF_Features_parameter_set_functions.html"><div class="navi">+ 8.7 Parameter Set Functions </div></a></li>
<li class="navi"><a href="REF_Features_table_functions.html"><div class="navi">+ 8.8 Table Functions </div></a></li>
<li class="navi"><a href="REF_Features_variables_functions.html"><div class="navi">+ 8.9 Variables Functions </div></a></li>
<li class="navi"><a href="REF_Features_directory_and_file_system_functions.html"><div class="navi">+ 8.10 Directory and File System Functions </div></a></li>
<li class="navi"><a href="REF_Features_system_functions.html"><div class="navi">+ 8.11 System Functions </div></a></li>
<li class="navi"><a href="REF_Features_help_and_support_functions.html"><div class="navi">+ 8.12 Help and Support Functions </div></a></li>
<li class="navi"><a href="REF_Features_Cross-functional_info.html"><div class="navi">+ 8.13 Cross-Functional Info </div></a></li>
</ul></li>
<li class="navi"><a href="REF_Features_verbose.html"><div class="navi"> Verbose Levels </div></a></li>
</ul>
	</div>

	<div class="article">
<h4> Loading Files</h4>
<p>
Beyond4P checks all files (programs and data) opened for <i>Byte Order Marks</i> (BOM) at the beginning of the file.  The BOM is a UNICODE character and used to differentiate between
UTF-16 big endian, UTF-16 little endian and UTF-8 file formats.  All formats are supported, whereas UTF-8 is by far the most common UNICODE data storage format
as it is compatible to various legacy systems supporing 8-byte character sets only.

<br><br>
Data transparency: The byte order marks will be recognized and then discarded, i.e. not passed on as special characters to the application.
<br><br>

How BOM's are checked in files loaded or opened:
</p><ul class="bullets"><li class="bullets">If the 2 byte sequence FE FF (hexadecimal) is found, then the text file is in UTF-16 big endian format.
</li><li class="bullets">If the 2 byte sequence FF FE (hexadecimal) is found, then the text file is in UTF-16 little endian format.
</li><li class="bullets">If the 3 byte sequence EF BB BF (hexadecimal) is found, then the text file is in UTF-8 format.
</li><li class="bullets">Some files contain multiple identical BOMs. They have been sighted in export files from relational databases.
</li></ul><p>
In case no BOM is found, following checks will be applied throughout the first ca. 4000 – 8000 bytes in the file (and not the entire file for performance reasons):
</p><ul class="bullets"><li class="bullets">NULL-characters / 00 (hexadecimal) in even numbered positions (first byte in file is position 0): File is UTF-16, big endian format.  <br>Example: 00 31   00 30   00 20   20 AC   00 0D   00 0A  (10 € followed by new line sequence CR+LF). <br>Even for <i>difficult</i> contents such as pure Chinese text, the UTF-16 will be identified from space symbols (00 20), numeric digits and CR+LF symbols.
</li><li class="bullets">NULL-characters / 00 (hexadecimal) in odd numbered positions: File is UTF-16, little endian format.  <br>Example: 31 00   30 00   20 00   AC 20   0D 00   0A 00  (10 € followed by new line sequence CR+LF)
</li></ul><p>
If the criteria above do not apply, then the file will be checked for typical UTF-8 patterns in the first 4000-8000 bytes, provided the file contains non-ANSI characters.

</p><ul class="bullets"><li class="bullets">Presence of non-ANSI symbols which make up typical UTF-8 byte patterns.  These are 2, 3 or 4 symbols with specific binary patterns.
</li><li class="bullets">Presence of non-ANSI symbols which do not match with UTF-8 byte patterns, e.g. simple 8-bit text in a ISO 8859-1 or WIN 1252 format with single non-ANSI characters
</li><li class="bullets">If the 1st criteria applies, but the 2nd does not, then the file is in UTF-8 format.
</li><li class="bullets">If the 2nd criteria applies, but the 1st does not, then the assumption will be non-UNICODE file format WIN 1252 which is the West European 8-bit character set.
</li></ul><p>
If the input file is in HTML format, then the "charset=…" commands will be checked accordingly.  JSON files are assumed in UTF-8 format by default.
Ambiguities may still apply in the following case:
</p><ul class="bullets"><li class="bullets">1 line of UTF-16 text containing foreign characters only and new line sequence, e.g. one sentence in Greek, Cyrillic or Chinese (without digits, spaces, new lines).
</li><li class="bullets">8-bit text file without non-ANSI character in the first 4000-8000 bytes (lots of English text in a huge file, a foreign word such as Café follows in a concluding sentence at the end of the file.
</li></ul><p>
Ambiguities need to be resolved with the system variable <b>local settings [ input file character set ]</b>.
As long no clear character format has been identified (e.g. UTF-16 or UTF-8), then the local settings will be referenced.  The initial default value is win1252 (American and West European character set).

<br><br>
Supported character sets summarized<br>

</p><table style = "width:1000px"><col style = "width:200px"><col style = "width:300px"><col style = "width:500px">
<tr><th>Character Set </th><th> Format </th><th> Description</th></tr>
<tr><td>ANSI        </td><td> 8 bits, 7 of them used    </td><td> Traditional ANSI characters.  All non-ANSI characters, including foreign characters, the Euro symbol, etc. are converted into question marks. <br>Examples: E  e</td></tr>
<tr><td>iso8859-1   </td><td> 8 bits            </td><td> ANSI characters plus West European character set in the range between 0xA0 (160) and 0xFF (255). <br> This format does not support Windows proprietary character range between 0x80 (128) and 0x9F (159) which affects the Euro symbol (€). <br>Examples: E  e  É  é</td></tr>
<tr><td>win1252     </td><td> 8 bits, <br> default setting for Windows </td><td> Same as above, but includes Windows proprietary character range so additional punctuation symbols as well as the Euro symbol (€) will be handled correctly. <br>Examples: E  e  É  é  €</td></tr>
<tr><td>utf-8       </td><td> 8 bits            </td><td> UNICODE format.  Characters can take 1, 2, 3 or 4 byes.<br>Examples: E  e  É  é  €  Ə  ə  中国  𐌄 (also applicable in next rows below)</td></tr>
<tr><td>utf-16      </td><td>16 bits (little endian)    </td><td> UNICODE format. Every character contains precisely 2 bytes, starting with the least significant byte.  Surrogate pairs are used for characters outside Basic Multilingual Plane.</td></tr>
<tr><td>utf-16 big endian </td><td> 16 bits (big endian)    </td><td> UNICODE format like above, but the two bytes are swapped. Surrogate pairs are used for characters outside Basic Multilingual Plane.</td></tr>
</table><p>

Note: Microsoft Excel does not understand utf-16 big endian, but understands the remaining UNICODE formats.  Use this format only if the recipient (e.g. a UNIX server) operates on big endian format only.

</p>
<h4> Saving Files</h4>
<p>
The chosen file format either depends on the format specified in a parameter in the <a class="bold_text" href="REF_Function_table_save.html">table save</a>() function call,
or it refers to the default setting stored in the <span class="red_text">system variable</span> <b>local settings [ output file character set ]</b>. If not modified by the user,
this file contains the value UTF-8. Files saved in UNICODE-format (UTF-8 and UTF-16 formats) will always begin start with corresponding Byte Order Marks.
This allows other applications to recognize and interpret the contents correctly.  This does effectively apply to Excel when reading comma or tab separated
file formats (.csv format).<br>
<br>Text files under Windows contain "carriage return + line feed" line breaks.
<br>Text files under LINUX contain "line feed" line breaks.
<br>You can change the setting with by setting system variable runtime settings [ crlf ] to true (enabled) or false (disabled)

</p>
	</div>
</section>

<div class="footer">
Copyright (C) 2007 - 2020 Georg zur Bonsen
</div>

</div>

</html>	


