<!DOCTYPE html>
<html lang="en-US">	

<head>
<meta charset="utf-8"/>
<title>B4P Reference</title>
<link rel="stylesheet" href="styles.css">
</head>


<div class="wrapper">

<div class="logo">
<a href="index.html">
<img src="Images/B4P_Logo.png" alt="B4P">
</a>
</div>

<div class="header">
<h3>smart num, smart if num</h3>
<a accesskey="p" href="LIB_Function_clean_num.html"><span>Prev</span></a> <a accesskey="n" href="LIB_Function_date.html"><span>Next</span></a> 
</div>

<section>
	<div class="nav">

<ul>
<li class="navi"><a href="MAS_Features_Overview.html"><div class="navi"> Introduction </div></a></li>
<li class="navi"><a href="GUI_Features_User_Guide.html"><div class="navi"> User Guide </div></a></li>
<li class="navi"><a href="LAN_Features_Language_Guide.html"><div class="navi"> Language Guide </div></a></li>
<li class="navi"><a href="TAB_Features_Processing_Tables_and_Big_Data.html"><div class="navi"> Table Processing </div></a></li>
<li class="navi"><a href="LIB_Features_Function_Library.html"><div class="navi navi-selected"> Function Library </div></a></li>
<li class="navi"><div> <hr> </div></li>
<li class="navi"><a href="LIB_Features_Index.html"><div class="navi"> Index </div></a></li>
<li class="navi"><div> <hr> </div></li>
<li class="navi"><a href="LIB_Features_Table_of_Contents.html"><div class="navi"> Table of Contents </div></a></li>
<li class="navi"><a href="LIB_Features_Function_Library.html"><div class="navi"> Function Library </div></a></li>
<li class="navi"><a href="LIB_Features_Control_flow_functions.html"><div class="navi">+  Control Flow Functions </div></a></li>
<li class="navi"><a href="LIB_Features_Console_I_O_Functions.html"><div class="navi">+  Console I/O Functions </div></a></li>
<li class="navi"><a href="LIB_Features_Type_Conversion_Functions.html"><div class="navi"+>-  Type Conversion and Formatting </div></a></li>
<li class="navi"><ul>
<li class="navi"><a href="LIB_Function_str.html"><div class="navi">+  str, soft </div></a></li>
<li class="navi"><a href="LIB_Function_num.html"><div class="navi">    num </div></a></li>
<li class="navi"><a href="LIB_Function_clean_num.html"><div class="navi">    clean num, clean if num </div></a></li>
<li class="navi"><a href="LIB_Function_smart_num.html"><div class="navi navi-selected">    smart num, smart if num </div></a></li>
<li class="navi"><a href="LIB_Function_date.html"><div class="navi">    date, pure date, date time </div></a></li>
<li class="navi"><a href="LIB_Function_time.html"><div class="navi">    time, pure time </div></a></li>
<li class="navi"><a href="LIB_Features_Detects_dates_correctly_in_strings.html"><div class="navi">    Date and Time Detection Rules </div></a></li>
<li class="navi"><a href="LIB_Function_bool.html"><div class="navi">    bool </div></a></li>
<li class="navi"><a href="LIB_Function_set.html"><div class="navi">    set </div></a></li>
<li class="navi"><a href="LIB_Function_best_type.html"><div class="navi">    best type </div></a></li>
<li class="navi"><a href="LIB_Function_join.html"><div class="navi">    join ... </div></a></li>
<li class="navi"><a href="LIB_Function_type.html"><div class="navi">    type, subtype </div></a></li>
<li class="navi"><a href="LIB_Function_hash_signature.html"><div class="navi">    hash signature </div></a></li>
<li class="navi"><a href="LIB_Function_excel_column.html"><div class="navi">    excel column </div></a></li>
<li class="navi"><a href="LIB_Function_excel_coordinates.html"><div class="navi">    excel coordinates </div></a></li>
<li class="navi"><a href="LIB_Function_excel_validate_sheet_name.html"><div class="navi">    excel validate sheet name </div></a></li>
</ul></li>
<li class="navi"><a href="LIB_Features_Mathematics_and_Statistics.html"><div class="navi">+  Mathematics and Statistics </div></a></li>
<li class="navi"><a href="LIB_Features_string_functions.html"><div class="navi">+  String Functions </div></a></li>
<li class="navi"><a href="LIB_Features_date_and_time_functions.html"><div class="navi">+  Date and Time Functions </div></a></li>
<li class="navi"><a href="LIB_Features_Set_functions.html"><div class="navi">+  Set Functions </div></a></li>
<li class="navi"><a href="LIB_Features_table_functions.html"><div class="navi">+  Table Functions </div></a></li>
<li class="navi"><a href="LIB_Features_variables_functions.html"><div class="navi">+  Variables Functions </div></a></li>
<li class="navi"><a href="LIB_Features_directory_and_file_system_functions.html"><div class="navi">+  Directory and File System Functions </div></a></li>
<li class="navi"><a href="LIB_Features_system_functions.html"><div class="navi">+  System Functions </div></a></li>
<li class="navi"><a href="LIB_Features_help_and_support_functions.html"><div class="navi">+  Help and Support Functions </div></a></li>
<li class="navi"><a href="LIB_Features_Cross-functional_info.html"><div class="navi">+  Cross-Functional Info </div></a></li>
</ul></li>
</ul>
	</div>

	<div class="article">
<h4> Function Names</h4>
<div class="white_background_color" ><code>smart num, smart if num</code></div>
<h4> Description</h4>
<p>
These two functions are an upgrade variant of <a class="bold_text" href="LIB_Function_clean_num.html">clean num</a>() and <a class="bold_text" href="LIB_Function_clean_num.html">clean if num</a>().

The functions smart num and smart if num provide automatic up- and downscaling feature if (e.g. metric) scaling units are specified.
As long no user specific units and scaling factors are specified in the 3rd and 4th parameters, the following units will be recognized and rescale
the numbers.   These stanard units are not case sensitive.<br><br>

<b>General Scaling Factors:</b>
</p><table class="bold_column_1" style = "width:1000px"><col style = "width:150px"><col style = "width:150px"><col style = "width:700px">
<tr><th>Units                                           </th><th> Scaling Factor                </th><th> Explanation</th></tr>
<tr><td>&cent;, pct, %                          </td><td> 0.01                                  </td><td> Cent, percent</td></tr>
<tr><td>&permil; (&amp;permil;)         </td><td> 0.001                                 </td><td> Per mille, part per thousand, see <sub>1</sub></td></tr>
<tr><td>&pertenk; (&amp;ertenk;), bp</td><td> 0.000 1                           </td><td> Part per ten thousand, base point (in finance), see <sub>1</sub></td></tr>
<tr><td>pcm                                                     </td><td> 0.000 01                              </td><td> Percent mille, part per hundred thousand</td></tr>
<tr><td>ppm                                                     </td><td> 0.000 001                             </td><td> Part per million</td></tr>
<tr><td>ppb                                                     </td><td> 0.000 000 001                 </td><td> Part per billion</td></tr>
<tr><td>k, t, tsd                                       </td><td> 1,000                                 </td><td> Kilo, thousand</td></tr>
<tr><td>m, mn, mln, mio                         </td><td> 1,000,000                             </td><td> Mega, million</td></tr>
<tr><td>g, b, bn, bln                           </td><td> 1,000,000,000                 </td><td> Giga, billion (<u>Note: B4P uses the</u> U.S. English interpretation of <i>billion</i>)</td></tr>
<tr><td>mrd, md, mia                            </td><td> 1,000,000,000                 </td><td> Milliard (common in Great Britain and other languages)</td></tr>
</table><p>

<b>Indian Scaling Factors:</b>
</p><table class="bold_column_1" style = "width:1000px"><col style = "width:150px"><col style = "width:150px"><col style = "width:700px">
<tr><th>Units                                           </th><th> Scaling Factor                </th><th> Explanation</th></tr>
<tr><td>lakh, lk, lac                           </td><td> 100,000                               </td><td> Indian hundred thousand</td></tr>
<tr><td>crore, cr                                       </td><td> 10,000,000                    </td><td> Indian ten milllion</td></tr>
<tr><td>arab                                            </td><td> 1,000,000,000                 </td><td> Indian 1 billion (British English: Indian 1 milliard)</td></tr>
</table><p>

<b>Prefix letters before 3-letter currency codes</b>, not case sensitive;
</p><table class="bold_column_1" style = "width:1000px"><col style = "width:150px"><col style = "width:150px"><col style = "width:700px">
<tr><th>Txxx, Kxxx                                      </th><th> 1,000                                 </th><th> TGBP, KUSD, KEUR, etc.</th></tr>
<tr><td>Mxxx                                            </td><td> 1,000,000                             </td><td> MUSD, MCHF</td></tr>
<tr><td>Bxxx                                            </td><td> 1,000,000                             </td><td> BUSD, BRUB</td></tr>
</table><p>

The different prefixes can be combined, e.g. <b>smart num ( 1 kEUR % )</b> returns 10.

<br><br>
The function <b>smart if num</b> behaves similarly like <b>clean if num</b>: Contents without numbers inside are passed through as strings.

<br><br>
Application hint: After loading a table from a different source, apply this function on all applicable number columns in order to clean
them up and do necessary scalings.

<br><br>
<a class="bold_text" href="LAN_Features_Vectorization.html">Vectorization</a>: This function supports vectorization in the 1st function parameter.
Instead of providing a single value, you can provide a set or even a nested set which contain multiple values.
The function will then process every value and its  return value contains a corresponding set containing all results.
</p>
<h4> Call as: <span class="black_text">function</span></h4>
<h4> Restrictions</h4>
<p>Indirect parameter passing is disabled<br/>
Vectorization is allowed in the 1st function parameter</p>
<h4> Parameter count</h4>
<p>1, 2, 4</p>
<h4> Parameters</h4>
<table class="simple"><col style = "width:80px"><col style = "width:120px"><col style = "width:800px"><tr><th>No.</th><th>Type</th><th>Description</th></tr>
<tr><td>1<br/>input</td>
<td>numeral or string<br/>set</td>
<td><b>Value</b><br/><p>If string and containing digits: Conversion to numeral.<br>
If string and containing no digits or string is blank: Conversion to 0 (<b>clean num</b>) or string returned (function <b>clean if num</b>)<br>
If numeral: Will be passed through.<br>
If set: <a class="bold_text" href="LAN_Features_Vectorization.html">Vectorization</a> will apply.  The contents in the set will be processed.</p>
</td></tr>
<tr><td>2<br/>input</td>
<td>string</td>
<td><b>Decimal symbol</b><br/><p>Use single character symbol, e.g. '.' or ','. <br>
Specify 'local' to use currently applicable locale settings.  Examples: It chooses '.' for countries like USA, United Kingdom and Switzerland, and ',' for Germany and Austria.</p>
<span class="black_text"><b> Default value: </b></span>. (point)
</td></tr>
<tr><td>Opt. 3<br/>input</td>
<td>set containing strings</td>
<td><b>Custom units</b><br/><p>Specify at least 1 unit name.  The units provided will be used instead (and not in addition) of the standard units.
<u>Attention:</u>Comparison of these units is <u>case-sensitive</u>. This allows to distinguish lower-case letters like "m" for milli and upper-case leeters like "M" for mega.
<br>Attention: 4th parameter must also be specified.</p>
<span class="black_text"><b> Default value: </b></span>Standard units apply (not case-sensitive)
</td></tr>
<tr><td>Opt. 4<br/>input</td>
<td>set containing numerals</td>
<td><b>Custom scaling factors</b><br/><p>For each custom unit defined in the previous function parameter, the correponding scaling factor needs to be added.
</p>
</td></tr>
</table>
<h4> Return value</h4>
<table class="simple"><col style = "width:120px"><col style = "width:880px"><tr><th>Type</th><th>Description</th></tr>
<tr>
<td>numeral<br/>string<br/>set</td>
<td><b>number</b><br/><p>Contains resulting number.  Strings may be returned by the function <b>smart if num</b> if the input value contains no digits.  Parameter set containing results is returned if <a class="bold_text" href="LAN_Features_Vectorization.html">vectorization</a> has been applied.</p></td></tr>
</table>
<h4> Examples</h4>
<div class="code_background_color" ><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo( smart num( "5.0 MUSD" )); // 5,000,000<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo( smart num( "EUR 1.2mn" )); // 1,200,000<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo( smart num( "INR 0.5 lk" )); // 50,000<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo( smart num( '50%' )); // 0.5<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo( smart num( 'Alc. 0.5 &amp;permil;' )); // 0.0005<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo( smart num( "1.23cr" ));&nbsp;&nbsp;// 12,300,000<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo( smart num( 1.23m, ".", { m, M }, {0.000001, 1000000} ));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo( smart num( {"5.0 MUSD","INR 0.5 lk"} )); // Vectorization example</code></div>
<h4> Output</h4>
<div class="output_background_color" ><code>5000000<br>1200000<br>50000<br>0.5<br>0.00005<br>12300000<br>0.00000123<br>{5000000,50000}<br></code></div><u>Try it yourself:</u> Open <b>LIB_Function_smart_num.b4p</b> in <a class="bold_text" href="B4P_Examples.zip">B4P_Examples.zip</a>. Decompress before use.
<h4> See also</h4>
<p><a class = "bold_text" href="LIB_Function_num.html">numeral conversion function</a><br/>
<a class = "bold_text" href="LIB_Function_clean_num.html">clean num</a><br/>
<a class = "bold_text" href="LIB_Function_clean_num.html">clean if num</a></p>
	</div>
</section>

<div class="footer">
Copyright (C) 2007 - 2024 Georg A. zur Bonsen, All Rights Reserved
</div>

</div>

</html>	

